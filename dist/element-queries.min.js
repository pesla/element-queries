!function(e,t){"undefined"!=typeof module?module.exports=t():"function"==typeof define&&"object"==typeof define.amd?define("domready",t):this[e]=t()}("domready",function(e){function t(e){for(f=1;e=i.shift();)e()}var n,i=[],r=!1,o=document,a=o.documentElement,s=a.doScroll,l="DOMContentLoaded",c="addEventListener",u="onreadystatechange",d="readyState",m=s?/^loaded|^c/:/^loaded|c/,f=m.test(o[d]);return o[c]&&o[c](l,n=function(){o.removeEventListener(l,n,r),t()},r),s&&o.attachEvent(u,n=function(){/^c/.test(o[d])&&(o.detachEvent(u,n),t())}),e=s?function(t){self!=top?f?t():i.push(t):function(){try{a.doScroll("left")}catch(n){return setTimeout(function(){e(t)},50)}t()}()}:function(e){f?e():i.push(e)}}),define("detect-resize",[],function(){"use strict";function e(){f=c(),window.requestAnimationFrame&&window.cancelAnimationFrame||l(),i()}function t(e,t){if(m)return void e.attachEvent("onresize",function(){t.call(e)});var n=e.id;return n?void(h[n]||r(e,t)):void u("error","Element has been passed to addListener but hasnt been identified yet.")}function n(e,t){if(m)return void e.detachEvent("onresize",t);var n=h[e.id];n&&(e.removeEventListener("scroll",o),e.removeChild(n.triggerElements.container),delete h[e.id])}function i(){var e=[f.keyframesRule?f.keyframesRule:"",".resize-triggers { "+(f.styleDeclaration?f.styleDeclaration:"")+" visibility: hidden; opacity: 0; }",'.resize-triggers, .resize-triggers > div, .contract-trigger:before { content: " "; display: block; position: absolute; top: 0; left: 0; height: 100%; width: 100%; overflow: hidden; } .resize-triggers > div { background: #eee; overflow: auto; } .contract-trigger:before { width: 200%; height: 200%; }'];e=e.join(" ");var t=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");n.type="text/css",n.styleSheet?n.styleSheet.cssText=e:n.appendChild(document.createTextNode(e)),t.appendChild(n)}function r(e,t){var n=d(e,"position");"static"===n&&(e.style.position="relative");var i=document.createElement("div"),r=document.createElement("div"),s=document.createElement("div"),l=document.createElement("div");i.className="resize-triggers",r.className="expand-trigger",l.className="contract-trigger",r.appendChild(s),i.appendChild(r),i.appendChild(l),e.appendChild(i),h[e.id]={targetElement:e,resizeLast:{},callbackFunction:t,triggerElements:{container:i,expand:r,expandChild:s,contract:l},resizeRAF:null},e.addEventListener("scroll",o,!0),f.isSupported&&i.addEventListener(f.animationStartEvent,function(t){t.animationName===f.animationName&&a(e)})}function o(){var e=this,t=h[e.id];a(e),t.resizeRAF&&window.cancelAnimationFrame(t.resizeRAF),t.resizeRAF=window.requestAnimationFrame(function(){var n=s(e),i=t.resizeLast;(n.width!=i.width||n.height!=i.height)&&(i.width=n.width,i.height=n.height,t.callbackFunction.call(e,n.width,n.height))})}function a(e){var t=e.id,n=h[t].triggerElements.expand,i=h[t].triggerElements.contract,r=h[t].triggerElements.expandChild;i.scrollLeft=i.scrollWidth,i.scrollTop=i.scrollHeight,r.style.width=n.offsetWidth+1+"px",r.style.height=n.offsetHeight+1+"px",n.scrollLeft=n.scrollWidth,n.scrollTop=n.scrollHeight}function s(e){return{width:e.offsetWidth,height:e.offsetHeight}}function l(){window.requestAnimationFrame||(window.requestAnimationFrame=function(){return window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(e){window.setTimeout(e,1e3/60)}}()),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(){return window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.oCancelAnimationFrame||window.msCancelAnimationFrame||window.clearTimeout}())}function c(){var e=!1,t="",n="animationstart",i="Webkit Moz O ms".split(" "),r="webkitAnimationStart animationstart oAnimationStart MSAnimationStart".split(" "),o=document.createElement("div");if(void 0!==o.style.animationName&&(e=!0),e===!1)for(var a=0,s=i.length;s>a;a++)if(void 0!==o.style[i[a]+"AnimationName"]){t="-"+i[a].toLowerCase()+"-",n=r[a],e=!0;break}if(!e)return{isSupported:!1};var l="resizeanim";return{isSupported:e,keyframesRule:"@"+t+"keyframes "+l+" {from { opacity: 0; } to { opacity: 0; }}",styleDeclaration:t+"animation: 1ms "+l+";",animationStartEvent:n,animationName:l}}function u(e,t){console&&console[e](t)}function d(e,t){var n=null;return e.currentStyle?n=e.currentStyle[t]:window.getComputedStyle&&(n=document.defaultView.getComputedStyle(e,null).getPropertyValue(t)),n}var m=document.attachEvent;if(m)return{addListener:t,removeListener:n};var f={},h={};return e(),{addListener:t,removeListener:n}}),define("src/element-queries",["domready","detect-resize"],function(e,t){"use strict";function n(e){this.element=e,this.queries=[],this.addElementQuery=function(e){this.queries.push(e)},this.callback=function(e,t){var n=this,i=l(n.id);if(null===i)return void u("error","There is no instance of ElementQueryElement for element id "+n.id);var r=i.queries.length,o={};e=e||n.offsetWidth,t=t||n.offsetHeight;for(var a=0;r>a;a++){var s=i.queries[a],c="width"===s.property?e:t,d=s.mode+"-"+s.property,m=parseFloat(s.value),f="";if("min"===s.mode&&c>=m&&(f=s.value),"max"===s.mode&&m>=c&&(f=s.value),f){o[d]||(o[d]=[]);var h=o[d].join(" ");if(-1!==h.indexOf(f))continue;o[d].push(f)}}var p=["min-width","min-height","max-width","max-height"];for(a=0,r=p.length;r>a;a++)o[p[a]]?n.setAttribute(p[a],o[p[a]].join(" ")):n.removeAttribute(p[a])}}function i(e,t){if(null===e)return[];if("string"==typeof e){var n=e.toLowerCase();return a(n)?[e]:[]}if(!t)var t=[];for(var r=0,o=e.length;o>r;r++)1===e[r].type?(n=e[r].selectorText||e[r].cssText,a(n)&&t.push(n)):4===e[r].type&&i(e[r].cssRules||e[r].rules,t);return t}function r(){var e=document.createStyleSheet();document.querySelectorAll=function(t){t=t.replace(/\[for\b/gi,"[htmlFor").split(",");for(var n=[],i=document.all,r=t.length;r--;){e.addRule(t[r],"k:v");for(var o=i.length;o--;)i[o].currentStyle.k&&n.push(i[o]);e.removeRule(0)}return n}}function o(){String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")}}function a(e){return-1!==e.indexOf("min-height")||-1!==e.indexOf("max-height")||-1!==e.indexOf("min-width")||-1!==e.indexOf("max-width")}function s(e){var t=e.id;if(t)return t;var n="element-query-element-";return t=n+c(d),e.id=t,t}function l(e){return d[e]?d[e]:null}function c(e){return Object.keys||(Object.keys=function(e){var t,n=[];for(t in e)e.hasOwnProperty(t)&&n.push(t);return n}),Object.keys(e).length}function u(e,t){console&&console[e](t)}var d={},m=function(){this.selectorsToParse=[],this.setupCache=[],this.initialize()};m.prototype.initialize=function(){if(!t)return void u("error","ElementQueryElements need some sort of element resize detection. `ResizeDetection` seems to be unavailable.");"function"!=typeof document.querySelectorAll&&r(),"function"!=typeof String.prototype.trim&&o();for(var e=0,n=document.styleSheets.length;n>e;e++)try{var a=i(document.styleSheets[e].cssText||document.styleSheets[e].cssRules||document.styleSheets[e].rules);a.length>0&&(this.selectorsToParse=this.selectorsToParse.concat(a))}catch(s){u("error","Unable to read from file: "+document.styleSheets[e].href)}if(this.selectorsToParse.length<1)return void u("info","No selectors found to initialize.");this.addSelectorsToParseToSetupCache(),this.setupElementQueryElements();for(var l in d)if(d.hasOwnProperty(l)){var c=d[l].element;d[l].callback.call(c)}},m.prototype.addSelectorsToParseToSetupCache=function(){for(var e=0,t=this.selectorsToParse.length;t>e;e++){var n,i=this.selectorsToParse[e],r=/,?([^,\n]*)\[[\s\t]*(min|max)-(width|height)[\s\t]*[~$\^]?=[\s\t]*"([^"]*)"[\s\t]*]([^\n\s\{]*)/gim;for(i=i.replace(/'/g,'"');null!==(n=r.exec(i));)if(n.length>5){var o=n[1].trim();""!==n[5]&&(o=n[5].trim()),this.setupCache.push([o,n[2],n[3],n[4]])}else u("info","Didn't find all necessary parts for selector "+i),u("info",n)}},m.prototype.setupElementQueryElements=function(){for(var e=0,i=this.setupCache.length;i>e;e++){var r=this.setupCache[e],o=r[0];try{var a=document.querySelectorAll(o);if(!a||a.length<1){u("info","No elements found for selector "+o);continue}for(var l=0,c=a.length;c>l;l++){var m=a[l],f=s(m);d[f]||(d[f]=new n(m),t.addListener(m,d[f].callback)),d[f].addElementQuery({mode:r[1],property:r[2],value:r[3]})}}catch(h){u("error","Unable to perform querySelectorAll for selector: "+o)}}console.log("foo")},m.prototype.removeListeners=function(){for(var e in d)d.hasOwnProperty(e)&&t.removeListener(d[e].element,d[e].callback);d={}};var f=function(){var t=this;e(function(){t.Instance=new m})};return f.prototype.resetElementQueryElements=function(){this.Instance.removeListeners(),this.Instance.setupElementQueryElements()},new f});
//# sourceMappingURL=element-queries.min.js.map